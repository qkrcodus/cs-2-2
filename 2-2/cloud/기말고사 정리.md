##### 컨테이너란?
애플리케이션과 그 실행 환경( 라이브러리, 설정)등을 묶은 패키지

- 클러스터 - 마스터와 워커로 이루어짐
마스터 : 클러스터 전체를 컨트롤, 내부 모든 노드 관리
워커 : 컨테이너 실행과 관리

- 네임스페이스 : 클러스터의 논리적 분리하여 사용하는 것을 의미
- CRI container runtime interface 컨테이너와 쿠버네티스 연결
##### 쿠버네티스란?
- 역할
컨테이너 한 두 개 실행했을 때와 다르게 수천 개 실행 시 장애 발생 시 복구, 네트워크 통신 구성 문제 등의 문제를 해결하는 컨테이너 오케스트레이션 도구
애플리케이션을 YAML 파일로 선언 후 배포 관리, 로드 밸런싱 롤링 업데이트 등 작업 수행
컨테이너화된 어플리케이션을 자동 배포, 스케일링 및 관리해주는 오픈소스 시스템
go 언어
구글 설계 후 지금 리눅스 재단에서

- AWS에선 EKS 가 쿠버네티스 제공
##### 이미지란?
- 컨테이너 운영체제, 실행 파일들, 종속성 , 환경설정 등을 담은 템플릿
- 이미지를 실행한 게 컨테이너다
##### 컨테이너 이미지와 AWS 저장소, ECR 에 저장
- DOCKER 로 컨테이너 이미지 빌드 
- AWS는 리전을 운영한다. AWS CLI 를 이용하여 컨테이너 이미지를 AWS 리전의 ECR(elastic container registry)에 저장
- ECR에 저장된 이미지는 ECS EC2 fargate와 연동되어 컨테이너화 된 애플리케이션 배포에 사용

##### EKS EC2 나 FARGATE , ECR ECS EC2나 FARGATE

- EKS : master(control plane) , EC2 FARGATE : worker(data plane)
- EC2 : 확장성 좋다 FARGATE : 확장성은 떨어지나, STATELESS 사용하기 쉽다 ,
- EKS : AWS가 쿠버네티스꺼 이용

- ECR : 도커의 이미지 저장소, 퍼블릭 파이브릿 있다
- ECS : AWS 자체 오케스트레이션 서비스

##### DEAMONSET KUBLET
모든 노드에 실행되는 POD를 배포하는 쿠버네티스 오브젝트
워커노드마다 DEAMONSET 1개씩 있다

워커노드와 마스터 노드는 KUBEAPISERVER KUBLET KUBEPROXY로 연결
##### BATCH 
cronjob이랑 job
##### S3
aws에서 제공하는 storage 파일 서버 , 사용자 많아도 ㄱㅊ, 파일 수 제한 없다, 파일에 인증 붙여 무단으로 접근 못하게 할 수 있다. rest soap가능 
편리 복원기능
- 객체 : 저장된 데이터 하나, 파일 하나
- 버킷 : 파일들을 그룹화한 것
- 버전관리 : s3에 저장된 객체들의 변화를 저장

##### VPC
가상 네트워크 환경 
여기에 AWS 리소스 배포 가능
웹 인터페이스, AMAZON CLI로 컨트롤 가능

##### EC2
가상화된 컴퓨터 환경 제공
가상 서버
거의 모든 서버 기반 작업에 사용
보안 그룹 사용하여 인스턴스 인바운드 아웃바운드 트래픽 관리하므로 관리자가 데이터 보안을 위한 규칙을 설정

#### 9주차_ 추가
##### 쿠버네티스란?
##### Control Plane
- 역할 
어플리케이션 스케일링 , 쿠버네티스 api 제공, 이를 통해 노드나 사용자와 통신

##### Node
- 역할
클러스터 내 vm
kublet (컨트롤 플레인이랑 통신) , docker와 같은 툴 포함
##### 디폴리이먼트
- 역할
지속적 모니터링, 어플리케이션 포함된 노드 삭제시 추가나 교체
##### kublet
- 역할
노드랑 컨트롤플레인 통신

##### pod
쿠버네티스 최소 단위, 

##### 레플리카셋, 셀렉터, 레이블
파드의 집합체, 파드의 복제시 고유 ip 주소 가짐에 따라 이를 관리하기 위해 셀렉터와 레이블 부여

##### 쿠버네티스의 스케일링과 로드밸런싱
동일한 내용의 파드를 다른 노드에 배치

- 스케일링 : 어플리케이션의 처리 용량 확장이나 축소
- 로드밸런싱 : kube-proxy 나 ingress로 새 파드로 신규 트래픽 분배 ( 특정 노드나 파드에 집중 x

##### 롤링 업데이트
업데이트된 파드 롤백 - 서비스 중단 없이 사용



##### 문제
iac 장점
배포 속도 향상, 구성드리프트제거, 비용 절감

다음 중 HashiCorp Terraform의 특징으로 적절하지 않은 것은?

1. 플랫폼 독립적인 프로바이더 방식을 지원한다.
2. 인프라의 변경 사항이 반영되면 기존 구성을 수정한다. => 변경 불가한 인프라다. 인프라가 바뀌면 현재 구성을 반영하는 구성으로 대체하고 인프라 다시 프로비저닝됨
3. 다양한 클라우드 서비스를 통합 관리할 수 있다.
4. 변경 불가능 인프라 방식을 채택한다.  
    **정답**: 2

Terraform에서 플랫폼 독립적으로 클라우드 서비스를 관리할 수 있도록 하는 방식을 무엇이라고 하나요?  
**모범 답안**: 프로바이더 방식

terraform 특징 - 서버나 네트워크 단위
==여러 장소에 동일한== 인프라 구성을 자동화할 수 있다.
특정 플랫폼에 종속적인 구성을 지원한다. xx 플랫폼 독립적

ansible - 소프트웨어 설치 단위
playbook

![[Pasted image 20241213123211.png]]

vault - 인증 관리 시스템
ceph - pv pvc로부터 구현된 스토리지 관리하고 만드는 오픈소스 ,물리적으로 만들어진 스토리지 논리적으로 저장하는  ??
storage - 

![[Pasted image 20241213130109.png]]



ingress, service
configmap,secret
pv,pvc
deployment
statefulset
==job
cronjob==
deamonset

Deployment-stateless에 적합 , 하나 이상 파드 포함 가능,파드를 캡슐화
Deployment가 새 파드를 생성할 때 고유 식별자 유지 x , 새로운 식별자 생성

- spec.container.imagePullPolicy : 엄청 중요함

![[Pasted image 20241213133724.png]]![[Pasted image 20241213133831.png]]
![[Pasted image 20241213134243.png]]
**DaemonSet**의 주요 기능 - 모든 노드에 동일 파드 배포
batch : 교통 스케줄링